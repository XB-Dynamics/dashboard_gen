<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI PDF Assistant | مساعد الذكاء الاصطناعي لملفات PDF</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Almarai:wght@400;700;800&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@400;500;600;700&display=swap');

        :root {
            --bg-gradient-onyx: linear-gradient(to bottom right, hsl(240, 1%, 25%) 3%, hsl(0, 0%, 19%) 97%);
            --bg-gradient-jet: linear-gradient(to bottom right, hsla(240, 1%, 18%, 0.251) 3%, hsla(240, 2%, 11%, 0) 100%), hsl(240, 2%, 13%);
            --bg-gradient-gold1: linear-gradient(to bottom right, hsl(45, 100%, 50%) 0%, hsla(45, 100%, 50%, 0) 50%);
            --bg-gradient-gold2: linear-gradient(135deg, hsla(45, 100%, 50%, 0.251) 0%, hsla(45, 100%, 50%, 0) 59.86%), hsl(240, 2%, 13%);
            --border-gradient-onyx: linear-gradient(to bottom right, hsl(0, 0%, 25%) 0%, hsla(0, 0%, 25%, 0) 50%);
            --text-gradient-gold: linear-gradient(to right, hsl(45, 100%, 50%), hsl(35, 100%, 60%));
            
            --jet: hsl(0, 0%, 22%);
            --onyx: hsl(240, 1%, 17%);
            --eerie-black1: hsl(240, 2%, 13%);
            --eerie-black2: hsl(240, 2%, 12%);
            --smoky-black: hsl(0, 0%, 7%);
            --white1: hsl(0, 0%, 100%);
            --white2: hsl(0, 0%, 98%);
            --gold: hsl(45, 100%, 50%);
            --light-gold: hsl(45, 100%, 70%);
            --light-gray: hsl(0, 0%, 84%);
            --light-gray70: hsla(0, 0%, 84%, 0.7);

            --ff-tajawal: "Tajawal", sans-serif;
            --ff-almarai: "Almarai", sans-serif;
            --ff-reem-kufi: "Reem Kufi", sans-serif;

            --fs1: 24px;
            --fs2: 18px;
            --fs3: 17px;
            --fs4: 16px;
            --fs5: 15px;
            --fs6: 14px;
            --fs7: 13px;
            --fs8: 12px;

            --fw300: 300;
            --fw400: 400;
            --fw500: 500;
            --fw600: 600;
            --fw700: 700;
            --fw800: 800;

            --shadow1: -4px 8px 24px hsla(0, 0%, 0%, 0.25);
            --shadow2: 0px 16px 30px hsla(0, 0%, 0%, 0.25);
            --shadow3: 0px 16px 40px hsla(0, 0%, 0%, 0.25);
            --shadow4: 0px 25px 50px hsla(0, 0%, 0%, 0.15);
            --shadow5: 0px 24px 80px hsla(0, 0%, 0%, 0.25);

            --transition1: 0.25s ease;
            --transition2: 0.5s ease-in-out;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--ff-almarai);
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            background: var(--smoky-black);
            color: var(--white2);
            line-height: 1.6;
            text-align: right;
            direction: rtl;
            display: flex;
            flex-direction: column;
            font-family: var(--ff-almarai);
        }

        /* Header Styles */
        .header {
            background: var(--bg-gradient-jet);
            padding: 0 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--white2);
            box-shadow: var(--shadow3);
            position: sticky;
            top: 0;
            z-index: 100;
            height: 60px;
            border-bottom: 3px solid var(--gold);
            flex-shrink: 0;
        }

        .header-container {
            display: flex;
            align-items: center;
            width: 100%;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .logo-icon {
            background: var(--bg-gradient-gold2);
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow1);
            border: 2px solid rgba(255, 215, 0, 0.3);
            flex-shrink: 0;
        }

        .logo-icon i {
            color: var(--gold);
            font-size: 16px;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
            line-height: 1.3;
            overflow: hidden;
        }

        .logo-title {
            font-size: 16px;
            font-weight: var(--fw800);
            background: var(--text-gradient-gold);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: var(--ff-reem-kufi);
        }

        .logo-subtitle {
            font-size: 11px;
            color: var(--light-gray);
            font-weight: var(--fw400);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: var(--ff-tajawal);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .header-btn {
            color: var(--light-gray);
            background: var(--bg-gradient-jet);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition2);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow1);
            flex-shrink: 0;
        }

        .header-btn:hover {
            color: var(--gold);
            transform: translateY(-3px);
            box-shadow: var(--shadow2);
            border-color: rgba(255, 215, 0, 0.3);
        }

        .header-btn:active {
            transform: translateY(0);
        }

        .header-btn i {
            font-size: 16px;
        }

        .new-chat-btn {
            background: var(--text-gradient-gold);
            color: var(--smoky-black);
            border: none;
            border-radius: 12px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: var(--transition2);
            box-shadow: var(--shadow2);
            font-size: 12px;
            font-weight: var(--fw700);
            flex-shrink: 0;
            font-family: var(--ff-reem-kufi);
        }

        .new-chat-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow4);
        }

        .new-chat-btn:active {
            transform: translateY(0);
        }

        /* Main Container */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
            height: calc(100vh - 60px);
        }

        /* Chat Container */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            background: var(--border-gradient-onyx);
            height: 100%;
        }

        .chat-header {
            padding: 12px 16px;
            background: var(--bg-gradient-jet);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
        }

        .chat-contact-info {
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
        }

        .chat-contact-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--text-gradient-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: var(--smoky-black);
            flex-shrink: 0;
        }

        .chat-contact-details {
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-contact-name {
            font-weight: var(--fw600);
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: var(--ff-reem-kufi);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ai-icon {
            color: var(--gold);
            cursor: pointer;
            transition: var(--transition1);
            font-size: 14px;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 215, 0, 0.1);
        }

        .ai-icon:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: scale(1.1);
        }

        .chat-contact-status {
            font-size: 12px;
            color: var(--light-gray70);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: var(--ff-tajawal);
        }

        .chat-actions {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }

        .chat-action-btn {
            background: none;
            border: none;
            color: var(--light-gray);
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition1);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .chat-action-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--gold);
        }

        .chat-messages {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            scroll-behavior: smooth;
            display: flex;
            flex-direction: column;
            gap: 12px;
            min-height: 0;
        }

        /* Message Styles */
        .message {
            display: flex;
            flex-direction: column;
            animation: fadeIn 0.4s ease-out;
            max-width: 90%;
            position: relative;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-user {
            align-items: flex-end;
            align-self: flex-end;
        }

        .message-ai {
            align-items: flex-start;
            align-self: flex-start;
        }

        .message-content {
            padding: 10px 14px;
            border-radius: 18px;
            position: relative;
            line-height: 1.5;
            font-size: 14px;
            transition: var(--transition1);
            word-break: break-word;
            box-shadow: var(--shadow1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .user-message .message-content {
            background: var(--text-gradient-gold);
            color: var(--smoky-black);
            border-bottom-right-radius: 6px;
            box-shadow: var(--shadow2);
            font-weight: var(--fw600);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .ai-message .message-content {
            background: var(--bg-gradient-jet);
            color: var(--white2);
            border-bottom-left-radius: 6px;
            box-shadow: var(--shadow1);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .message-time {
            font-size: 10px;
            color: var(--light-gray70);
            margin-top: 4px;
            font-weight: var(--fw400);
            display: flex;
            align-items: center;
            gap: 4px;
            font-family: var(--ff-tajawal);
        }

        .message-time i {
            font-size: 9px;
        }

        /* PDF Info Section */
        .pdf-info-container {
            background: var(--bg-gradient-jet);
            border-radius: 12px;
            padding: 16px;
            margin: 16px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            display: none;
        }

        .pdf-info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .pdf-info-icon {
            font-size: 24px;
            color: var(--gold);
        }

        .pdf-info-title {
            font-size: 16px;
            font-weight: var(--fw700);
            color: var(--white2);
            font-family: var(--ff-reem-kufi);
        }

        .pdf-details {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .pdf-detail {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .pdf-detail:last-child {
            border-bottom: none;
        }

        .pdf-detail-label {
            font-size: 14px;
            color: var(--light-gray);
            font-family: var(--ff-tajawal);
        }

        .pdf-detail-value {
            font-size: 14px;
            color: var(--white2);
            font-weight: var(--fw600);
            font-family: var(--ff-tajawal);
        }

        /* Chat Input */
        .chat-input-container {
            padding: 12px 16px;
            background: var(--bg-gradient-jet);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            position: sticky;
            bottom: 0;
            z-index: 10;
            flex-shrink: 0;
        }

        .input-wrapper {
            flex: 1;
            display: flex;
            align-items: center;
            background: var(--smoky-black);
            border-radius: 22px;
            padding: 6px 14px;
            transition: var(--transition2);
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow1);
            position: relative;
            min-width: 0;
        }

        .input-wrapper:focus-within {
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
        }

        .chat-input {
            flex: 1;
            border: none;
            background: transparent;
            padding: 8px 10px;
            font-size: 14px;
            outline: none;
            color: var(--white2);
            min-width: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .chat-input::placeholder {
            color: var(--light-gray70);
            opacity: 0.6;
        }

        .input-actions {
            display: flex;
            gap: 6px;
        }

        .input-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--light-gray70);
            font-size: 16px;
            transition: var(--transition1);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .input-btn:hover {
            color: var(--gold);
            background: rgba(255, 215, 0, 0.1);
        }

        .input-btn:active {
            transform: scale(0.95);
        }

        .send-button-inside {
            background: var(--text-gradient-gold);
            color: var(--smoky-black);
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition2);
            box-shadow: var(--shadow2);
            font-weight: var(--fw700);
            flex-shrink: 0;
        }

        .send-button-inside:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow3);
        }

        .send-button-inside:active {
            transform: scale(0.98);
        }

        /* Thinking Indicator */
        .thinking-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            background: var(--bg-gradient-jet);
            border-radius: 18px;
            border-bottom-left-radius: 6px;
            box-shadow: var(--shadow1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 180px;
            margin-bottom: 12px;
        }

        .thinking-text {
            font-size: 13px;
            color: var(--light-gray70);
            font-family: var(--ff-tajawal);
        }

        .thinking-dots {
            display: flex;
            gap: 3px;
        }

        .thinking-dot {
            width: 5px;
            height: 5px;
            background-color: var(--gold);
            border-radius: 50%;
            animation: thinkingAnimation 1.5s infinite ease-in-out;
        }

        .thinking-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .thinking-dot:nth-child(2) {
            animation-delay: 0.3s;
        }

        .thinking-dot:nth-child(3) {
            animation-delay: 0.6s;
        }

        @keyframes thinkingAnimation {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }

        /* Info Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow-y: auto;
            padding: 15px;
        }

        .modal-content {
            background: var(--bg-gradient-jet);
            border-radius: 20px;
            max-width: 90%;
            margin: 20px auto;
            overflow: hidden;
            box-shadow: var(--shadow5);
            animation: modalFadeIn 0.3s ease-out;
            border: 2px solid rgba(255, 215, 0, 0.2);
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--border-gradient-onyx);
        }

        .modal-title {
            font-size: 18px;
            font-weight: var(--fw800);
            color: var(--gold);
            font-family: var(--ff-reem-kufi);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 20px;
            color: var(--light-gray70);
            cursor: pointer;
            transition: var(--transition1);
        }

        .close-modal:hover {
            color: var(--gold);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 16px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: var(--fw600);
            color: var(--white2);
            font-family: var(--ff-tajawal);
        }

        .modal-footer {
            padding: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            background: var(--border-gradient-onyx);
        }

        .modal-btn {
            padding: 8px 16px;
            border-radius: 12px;
            font-weight: var(--fw700);
            cursor: pointer;
            transition: var(--transition2);
            border: none;
            font-family: var(--ff-reem-kufi);
        }

        .primary-btn {
            background: var(--text-gradient-gold);
            color: var(--smoky-black);
        }

        .primary-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow3);
        }

        /* Responsive Design */
        @media (max-width: 480px) {
            .header {
                padding: 0 12px;
                height: 56px;
            }
            
            .logo-icon {
                width: 32px;
                height: 32px;
            }
            
            .logo-title {
                font-size: 14px;
            }
            
            .logo-subtitle {
                display: none;
            }
            
            .header-btn {
                width: 32px;
                height: 32px;
            }
            
            .new-chat-btn span {
                display: none;
            }
            
            .new-chat-btn {
                width: 32px;
                height: 32px;
                padding: 0;
                justify-content: center;
                border-radius: 50%;
            }
            
            .chat-header {
                padding: 10px 12px;
            }
            
            .chat-contact-avatar {
                width: 36px;
                height: 36px;
                font-size: 14px;
            }
            
            .chat-contact-name {
                font-size: 13px;
            }
            
            .chat-contact-status {
                font-size: 11px;
            }
            
            .chat-action-btn {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
            
            .chat-messages {
                padding: 12px;
                gap: 10px;
            }
            
            .message {
                max-width: 95%;
            }
            
            .message-content {
                padding: 8px 12px;
                font-size: 13px;
            }
            
            .pdf-info-container {
                padding: 12px;
                margin: 12px;
            }
            
            .chat-input-container {
                padding: 10px 12px;
            }
            
            .input-wrapper {
                padding: 5px 10px;
            }
            
            .chat-input {
                font-size: 13px;
            }
            
            .input-btn {
                width: 28px;
                height: 28px;
                font-size: 14px;
            }
            
            .send-button-inside {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }
        }

        @media (max-width: 360px) {
            .header {
                padding: 0 10px;
            }
            
            .logo-title {
                font-size: 13px;
            }
            
            .chat-messages {
                padding: 10px;
            }
            
            .message {
                max-width: 98%;
            }
            
            .message-content {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-container">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-file-pdf"></i>
                </div>
                <div class="logo-text">
                    <span class="logo-title">AI PDF Assistant</span>
                    <span class="logo-subtitle">مساعد الذكاء الاصطناعي لملفات PDF</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="header-btn" id="logout-btn" title="تسجيل الخروج">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
                <button class="new-chat-btn" id="new-chat-btn">
                    <i class="fas fa-plus"></i>
                    <span>محادثة جديدة</span>
                </button>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- Chat Container -->
        <div class="chat-container" id="chat-container">
            <div class="chat-header">
                <div class="chat-contact-info">
                    <div class="chat-contact-avatar" id="chat-contact-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="chat-contact-details">
                        <div class="chat-contact-name" id="chat-contact-name">
                            AI PDF Assistant
                        </div>
                        <div class="chat-contact-status" id="chat-contact-status">Online - متصل</div>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="chat-action-btn" id="info-btn" title="معلومات المساعد">
                        <i class="fas fa-info-circle"></i>
                    </button>
                </div>
            </div>
            <div class="chat-messages" id="chat-messages">
                <!-- الرسالة الترحيبية ستكون هنا -->
            </div>
            
            <!-- PDF Info Section -->
            <div class="pdf-info-container" id="pdf-info-container">
                <div class="pdf-info-header">
                    <div class="pdf-info-icon">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <div class="pdf-info-title" id="pdf-info-title">معلومات الملف</div>
                </div>
                <div class="pdf-details">
                    <div class="pdf-detail">
                        <span class="pdf-detail-label">اسم الملف:</span>
                        <span class="pdf-detail-value" id="pdf-file-name">-</span>
                    </div>
                    <div class="pdf-detail">
                        <span class="pdf-detail-label">الحجم:</span>
                        <span class="pdf-detail-value" id="pdf-file-size">-</span>
                    </div>
                    <div class="pdf-detail">
                        <span class="pdf-detail-label">عدد الصفحات:</span>
                        <span class="pdf-detail-value" id="pdf-page-count">-</span>
                    </div>
                    <div class="pdf-detail">
                        <span class="pdf-detail-label">تاريخ الرفع:</span>
                        <span class="pdf-detail-value" id="pdf-upload-date">-</span>
                    </div>
                </div>
            </div>
            
            <div class="chat-input-container">
                <div class="input-wrapper">
                    <input type="text" class="chat-input" id="message-input" placeholder="اسأل عن أي شيء في ملف PDF..." autofocus disabled>
                    <div class="input-actions">
                        <button class="input-btn" id="pdf-upload-btn" title="رفع ملف PDF">
                            <i class="fas fa-file-upload"></i>
                        </button>
                        <button class="send-button-inside" id="send-btn" title="إرسال" disabled>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Info Modal -->
    <div class="modal" id="info-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">About AI PDF Assistant</h3>
                <button class="close-modal" id="close-info-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <h4 style="color: var(--gold); margin-bottom: 10px; font-family: var(--ff-reem-kufi);">AI PDF Assistant</h4>
                    <p style="margin-bottom: 15px; font-family: var(--ff-almarai);">
                        أنا مساعد ذكاء اصطناعي متخصص في تحليل ملفات PDF. يمكنني مساعدتك في فهم محتوى ملفات PDF والإجابة على أسئلتك حولها.
                    </p>
                    <h4 style="color: var(--gold); margin-bottom: 10px; font-family: var(--ff-reem-kufi);">ما يمكنني المساعدة فيه:</h4>
                    <ul style="margin-right: 15px; font-family: var(--ff-almarai);">
                        <li>تلخيص محتوى ملف PDF</li>
                        <li>الإجابة على أسئلة محددة حول المحتوى</li>
                        <li>شرح المفاهيم المعقدة</li>
                        <li>استخراج المعلومات المهمة</li>
                        <li>مقارنة بين أجزاء مختلفة من المستند</li>
                    </ul>
                    <p style="margin-top: 15px; font-family: var(--ff-almarai); color: var(--light-gold);">
                        <strong>ملاحظة:</strong> ارفع ملف PDF أولاً للبدء في المحادثة حول محتواه!
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn primary-btn" id="close-info-btn">حسناً</button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const messageInput = document.getElementById('message-input');
        const sendBtn = document.getElementById('send-btn');
        const chatMessages = document.getElementById('chat-messages');
        const logoutBtn = document.getElementById('logout-btn');
        const newChatBtn = document.getElementById('new-chat-btn');
        const infoBtn = document.getElementById('info-btn');
        const infoModal = document.getElementById('info-modal');
        const closeInfoModal = document.getElementById('close-info-modal');
        const closeInfoBtn = document.getElementById('close-info-btn');
        const pdfUploadBtn = document.getElementById('pdf-upload-btn');
        const pdfInfoContainer = document.getElementById('pdf-info-container');
        const pdfFileName = document.getElementById('pdf-file-name');
        const pdfFileSize = document.getElementById('pdf-file-size');
        const pdfPageCount = document.getElementById('pdf-page-count');
        const pdfUploadDate = document.getElementById('pdf-upload-date');

        // Current PDF file
        let currentPDFFile = null;
        let pdfTextContent = "";

        // Initialize the app
        function initApp() {
            // Add welcome message on the left side (AI side)
            addWelcomeMessage();
            
            // Adjust chat messages height on resize
            window.addEventListener('resize', adjustChatHeight);
            adjustChatHeight();
        }

        // Add welcome message on the left side
        function addWelcomeMessage() {
            const welcomeMessage = `مرحباً! أنا مساعد PDF الذكي. ارفع ملف PDF لأساعدك في فهم محتواه.`;
            
            addMessageToChat(welcomeMessage, 'ai');
        }

        // Adjust chat height to fit screen
        function adjustChatHeight() {
            const headerHeight = document.querySelector('.header').offsetHeight;
            const chatHeaderHeight = document.querySelector('.chat-header').offsetHeight;
            const inputContainerHeight = document.querySelector('.chat-input-container').offsetHeight;
            
            const availableHeight = window.innerHeight - headerHeight - chatHeaderHeight - inputContainerHeight;
            
            chatMessages.style.maxHeight = availableHeight + 'px';
        }

        // Handle PDF upload
        function handlePDFUpload(file) {
            if (file && file.type === 'application/pdf') {
                currentPDFFile = file;
                
                // Show file info
                showPDFInfo(file);
                
                // Simulate PDF processing
                simulatePDFProcessing(file);
                
                // Enable chat input
                messageInput.disabled = false;
                sendBtn.disabled = false;
                messageInput.placeholder = "اسأل عن أي شيء في ملف PDF...";
                messageInput.focus();
                
            } else {
                alert("يرجى اختيار ملف PDF صالح!");
            }
        }

        // Show PDF info
        function showPDFInfo(file) {
            const fileSize = (file.size / 1024 / 1024).toFixed(2) + ' MB';
            const uploadDate = new Date().toLocaleDateString('ar-EG');
            
            pdfFileName.textContent = file.name;
            pdfFileSize.textContent = fileSize;
            pdfPageCount.textContent = "جاري المعالجة...";
            pdfUploadDate.textContent = uploadDate;
            
            // Show info container
            pdfInfoContainer.style.display = 'block';
        }

        // Simulate PDF processing
        function simulatePDFProcessing(file) {
            // Show processing message
            addMessageToChat("جاري معالجة ملف PDF...", 'ai');
            
            // Simulate processing time
            setTimeout(() => {
                // Simulate extracting text from PDF
                pdfTextContent = `محتوى محاكاة لملف PDF: ${file.name}`;
                
                // Update page count
                pdfPageCount.textContent = "5 صفحات (تقديري)";
                
                // Add success message
                addMessageToChat(
                    `تم معالجة ملف PDF بنجاح! يمكنك الآن طرح أسئلتك حول محتواه.`,
                    'ai'
                );
            }, 2000);
        }

        // Send message function
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (message === '') return;

            // Add user message
            addMessageToChat(message, 'user');

            // Clear input
            messageInput.value = '';
            messageInput.focus();

            // Show thinking indicator
            showThinkingIndicator();

            try {
                // Simulate API call to process the question
                setTimeout(() => {
                    // Remove thinking indicator
                    removeThinkingIndicator();
                    
                    // Generate AI response based on the question
                    const aiResponse = generateAIResponse(message);
                    
                    // Add AI response to chat
                    addMessageToChat(aiResponse, 'ai');
                }, 1500);
                
            } catch (error) {
                // Remove thinking indicator
                removeThinkingIndicator();
                
                // Show error message
                addMessageToChat(
                    "عذراً، حدث خطأ في المعالجة. يرجى المحاولة مرة أخرى.", 
                    'ai'
                );
                console.error('Error in sendMessage:', error);
            }
        }

        // Generate AI response based on question
        function generateAIResponse(question) {
            return `إجابة على سؤالك حول ملف PDF:

سؤالك: "${question}"

بناءً على محتوى ملف PDF، يمكنني الإجابة على استفسارك. المحتوى يغطي موضوعات متعددة ويمكن استخراج المعلومات ذات الصلة بسؤالك.

في التطبيق الحقيقي، ستكون الإجابة مبنية على التحليل الدقيق لمحتوى ملف PDF الفعلي.`;
        }

        // Add message to chat
        function addMessageToChat(text, sender, time = null, scroll = true) {
            if (!time) {
                time = new Date().toLocaleTimeString('ar-EG', {hour: '2-digit', minute:'2-digit'});
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', `message-${sender}`, `${sender}-message`);
            
            const contentDiv = document.createElement('div');
            contentDiv.classList.add('message-content');
            contentDiv.textContent = text;
            
            const timeDiv = document.createElement('div');
            timeDiv.classList.add('message-time');
            timeDiv.innerHTML = `<i class="far fa-clock"></i> ${time}`;
            
            messageDiv.appendChild(contentDiv);
            messageDiv.appendChild(timeDiv);
            
            chatMessages.appendChild(messageDiv);
            
            if (scroll) {
                scrollToBottom();
            }
            
            return messageDiv;
        }

        // Show thinking indicator
        function showThinkingIndicator() {
            const thinkingDiv = document.createElement('div');
            thinkingDiv.classList.add('thinking-indicator');
            thinkingDiv.id = 'thinking-indicator';
            
            thinkingDiv.innerHTML = `
                <div class="thinking-text">جاري المعالجة...</div>
                <div class="thinking-dots">
                    <div class="thinking-dot"></div>
                    <div class="thinking-dot"></div>
                    <div class="thinking-dot"></div>
                </div>
            `;
            
            chatMessages.appendChild(thinkingDiv);
            scrollToBottom();
        }

        // Remove thinking indicator
        function removeThinkingIndicator() {
            const thinkingIndicator = document.getElementById('thinking-indicator');
            if (thinkingIndicator) {
                thinkingIndicator.remove();
            }
        }

        // Scroll to bottom of chat
        function scrollToBottom() {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Clear chat function
        function clearChat() {
            if (confirm("هل تريد بدء محادثة جديدة؟ سيتم إزالة ملف PDF الحالي.")) {
                chatMessages.innerHTML = '';
                pdfInfoContainer.style.display = 'none';
                messageInput.disabled = true;
                sendBtn.disabled = true;
                messageInput.placeholder = "اسأل عن أي شيء في ملف PDF...";
                currentPDFFile = null;
                pdfTextContent = "";
                
                // Add welcome message again on the left side
                addWelcomeMessage();
            }
        }

        // Event Listeners
        sendBtn.addEventListener('click', sendMessage);
        
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // PDF upload button (now inside input actions)
        pdfUploadBtn.addEventListener('click', () => {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = '.pdf';
            fileInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                handlePDFUpload(file);
            });
            fileInput.click();
        });
        
        // Logout button
        logoutBtn.addEventListener('click', () => {
            if (confirm("هل تريد تسجيل الخروج؟")) {
                alert("تم تسجيل الخروج بنجاح!");
                // In a real app, this would redirect to login page
            }
        });
        
        // New chat button
        newChatBtn.addEventListener('click', clearChat);
        
        // Info button
        infoBtn.addEventListener('click', () => {
            infoModal.style.display = 'block';
        });
        
        // Close info modal
        closeInfoModal.addEventListener('click', () => {
            infoModal.style.display = 'none';
        });
        
        closeInfoBtn.addEventListener('click', () => {
            infoModal.style.display = 'none';
        });
        
        // Close modal when clicking outside
        document.addEventListener('click', (e) => {
            if (e.target === infoModal) {
                infoModal.style.display = 'none';
            }
        });
        
        // Initialize the app
        initApp();
    </script>
</body>
</html>